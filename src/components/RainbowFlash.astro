---
const { text = "Rainbow Flash" } = Astro.props;
---

<div id="rainbowBox" class="inline-block px-2 py-1 rounded">
  {text}
</div>

<button id="rainbowButton" class="ml-2 border px-2 py-1">
  Flash
</button>

<script client:load>
  const rainbowBox = document.getElementById('rainbowBox');
  const rainbowButton = document.getElementById('rainbowButton');

  const rainbowPairs = [
    { bg: '#FF0000', text: '#FFFFFF' }, // Red
    { bg: '#FF8C00', text: '#000000' }, // Orange
    { bg: '#FFD700', text: '#000000' }, // Gold
    { bg: '#32CD32', text: '#000000' }, // Lime Green
    { bg: '#1E90FF', text: '#FFFFFF' }, // Blue
    { bg: '#4B0082', text: '#FFFFFF' }, // Indigo
    { bg: '#EE82EE', text: '#000000' }  // Violet
  ];

  rainbowButton.addEventListener('click', () => {
    let i = 0;
    const steps = rainbowPairs.length * 3; // cycle more than once
    const intervalDuration = 5000 / steps; // total duration 5s

    const interval = setInterval(() => {
      const { bg, text } = rainbowPairs[i % rainbowPairs.length];
      rainbowBox.style.backgroundColor = bg;
      rainbowBox.style.color = text;
      i++;

      if (i > steps) {
        clearInterval(interval);
        rainbowBox.style.backgroundColor = '';
        rainbowBox.style.color = '';
      }
    }, intervalDuration);
  });
</script>
